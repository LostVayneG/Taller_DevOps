pipeline {
    agent any
    stages{
        stage('config'){
            steps{
                sh 'cp -rf ./rp-portfolio ./deploy/'
            }
        }
        stage('build'){
            steps{
                sh 'ls -l'
                sh 'cd ./rp-portfolio'
                sh 'ls -l'
                sh 'python3 ./rp-portfolio/manage.py makemigrations projects'
                sh 'python3 manage.pymanage.py migrate projects'
            }
        }
        stage('deploy'){
            steps{
                sh 'cd /deploy/rp-portfolio/'
                sh 'python3 manage.py runserver'
            }
        }
    }
}
